<!DOCTYPE html>
<html lang="en">

<head>
    <h1>Problem 2</h1>
</head>

<body>
    <title>Problem 2</title>
    <h2>Give an binary tree</h2>
    <div>
        <input id="arrayInput" type="text" placeholder="Ex:1,2,3"
            value="6,7,8,2,7,1,3,9,null,1,4,null,null,null,5" onkeypress="press(event)" autofocus />
        <button id="solveButton" onclick="solve()">Solve</button>
    </div>
    <h2>Result</h2>
    <div id="result"></div>
</body>
<script>
    function press(e) {
        if (e.keyCode == 13) {
            solve();
        }
    }

    function solve() {
        var array = document.getElementById("arrayInput").value.split(",");

        tree = new Tree();
        tree.root = tree.insert2Tree(array, tree.root, 0);

        tree.solveProblem2(tree.root, 0, array[array.length - 1]);
    }

    class Node {
        constructor(data) {
            this.data = data;
            this.left = null;
            this.right = null;
        }
    }

    class Tree {
        constructor() {
            this.root = null;
        }

        insert2Tree(arr, node, index) {
            if (index < arr.length) {
                var tmpNode = new Node(arr[index]);
                node = tmpNode;

                node.left = this.insert2Tree(arr, node.left, 2 * index + 1);
                node.right = this.insert2Tree(arr, node.right, 2 * index + 2);
            }
            return node;
        }

        solveProblem2(node, sum, lastNode) {
            if (node !== null) {
                if (node.data % 2 == 0) {
                    if (node.left !== null) {
                        if (this.checkNodeNotNull(node.left.left)) {
                            sum += parseInt(node.left.left.data);
                        }
                        if (this.checkNodeNotNull(node.left.right)) {
                            sum += parseInt(node.left.right.data);
                        }
                    }
                    if (node.right !== null) {
                        if (this.checkNodeNotNull(node.right.left)) {
                            sum += parseInt(node.right.left.data);
                        }
                        if (this.checkNodeNotNull(node.right.right)) {
                            sum += parseInt(node.right.right.data);
                        }
                    }

                }
                this.solveProblem2(node.left, sum, lastNode);
                this.solveProblem2(node.right, sum, lastNode);
                if (node.left === null && node.right === null && node.data === lastNode) {
                    this.printProblem2Result(sum);
                }
            }
            
        }

        printProblem2Result(result) {
            document.getElementById("result").innerHTML = result;
        }

        checkNodeNotNull(node) {
            if (node && node.data && node.data !== 'null') {
                return true;
            }
            return false;
        }

    }
</script>

</html>